trigger:
  branches:
    include:
      - main

# ðŸ‘‡ Your self-hosted agent pool
pool:
  name: 'Croem Build Servers'

steps:

# ========================
# ðŸŸ¦ Install Node 20 (Required for Cypress 15)
# ========================
- task: NodeTool@0
  inputs:
    versionSpec: '20.x'
  displayName: "Install Node.js 20.x"

# ========================
# âš¡ FAST NPM INSTALL (no hanging, no npm ci slow issue)
# ========================
- script: |
    npm install --prefer-offline --no-audit --no-fund
  displayName: "Install NPM Dependencies (FAST)"

# ========================
# ðŸ§ª Run Cypress Tests
# ========================
- script: |
    npx cypress run
  displayName: "Run Cypress Tests"

